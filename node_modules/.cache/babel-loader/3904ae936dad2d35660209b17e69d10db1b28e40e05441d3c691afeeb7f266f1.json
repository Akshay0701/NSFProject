{"ast":null,"code":"var _s = $RefreshSig$();\n// src/hooks/useIntroPage.js\nimport { useCallback, useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport roomService from '../services/roomService';\nconst useIntroPage = () => {\n  _s();\n  const navigate = useNavigate();\n  const [roomID, setRoomID] = useState('');\n  const [roomIDCreate, setRoomIDCreate] = useState('');\n  const [error, setError] = useState('');\n  const [userRooms, setUserRooms] = useState([]);\n  const [addedRooms, setAddedRooms] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [suggestedRoomIDs, setSuggestedRoomIDs] = useState([]);\n  const userEmail = localStorage.getItem('userEmail');\n  const createRoom = useCallback(async (creatorID, roomID = null) => {\n    try {\n      const result = await roomService.createRoom(creatorID, roomID);\n      toast.success('Room created successfully.');\n      setSuggestedRoomIDs([]); // Clear suggestions if successful\n      return result;\n    } catch (err) {\n      console.error(err);\n      if (roomID) {\n        const suggestions = Array.from({\n          length: 3\n        }, (_, i) => {\n          const suffix = Math.floor(Math.random() * 10000);\n          return `${roomID}-${suffix}`;\n        });\n        setSuggestedRoomIDs(suggestions);\n        toast.error(`${err.message}`);\n      } else {\n        toast.error(`${err.message}`);\n      }\n      throw err;\n    }\n  }, []);\n  const getRoomsByEmail = useCallback(async email => {\n    try {\n      const data = await roomService.getRoomsByEmail(email);\n      return data.rooms || [];\n    } catch (err) {\n      console.error(err);\n      toast.error('Failed to fetch rooms by email.');\n      return [];\n    }\n  }, []);\n  const getAddedRoomsByEmail = useCallback(async email => {\n    try {\n      const data = await roomService.getAddedRooms(email);\n      return data.rooms || [];\n    } catch (err) {\n      console.error(err);\n      toast.error('Failed to fetch added rooms.');\n      return [];\n    }\n  }, []);\n  const removeRoom = useCallback(async ({\n    roomID,\n    email\n  }) => {\n    try {\n      const result = await roomService.removeRoomData({\n        roomID,\n        email\n      });\n      toast.success('Room removed successfully.');\n      return result;\n    } catch (err) {\n      console.error(err);\n      toast.error('Failed to remove room.');\n      throw err;\n    }\n  }, []);\n  const fetchRooms = useCallback(async () => {\n    if (!userEmail) {\n      toast.error('Please log in to view your rooms');\n      return;\n    }\n    setIsLoading(true);\n    try {\n      const [createdRooms, joinedRooms] = await Promise.all([getRoomsByEmail(userEmail), getAddedRoomsByEmail(userEmail)]);\n      setUserRooms(createdRooms);\n      setAddedRooms(joinedRooms);\n    } catch {\n      toast.error('Could not fetch rooms');\n    } finally {\n      setIsLoading(false);\n    }\n  }, [userEmail, getRoomsByEmail, getAddedRoomsByEmail]);\n  const handleJoinRoom = () => {\n    const trimmedID = roomID.trim();\n    if (!trimmedID) {\n      setError('Please enter a Room ID');\n      return;\n    }\n    setError('');\n    navigate(`/room/${trimmedID}`);\n  };\n  const handleCreateRoom = async () => {\n    if (!userEmail) {\n      toast.error('Please log in to create a room');\n      return;\n    }\n    setIsLoading(true);\n    try {\n      const trimmedID = roomIDCreate.trim();\n      let res = null;\n      if (!trimmedID) {\n        res = await createRoom(userEmail);\n      } else {\n        res = await createRoom(userEmail, trimmedID);\n      }\n      const newRoomId = res.RoomID;\n      navigate(`/room/${newRoomId}`);\n    } catch {} finally {\n      setIsLoading(false);\n    }\n  };\n  const handleDeleteRoom = async roomID => {\n    if (!window.confirm('Are you sure you want to delete this room?')) return;\n    try {\n      await removeRoom({\n        roomID,\n        email: userEmail\n      });\n      fetchRooms();\n    } catch {\n      toast.error('Failed to delete room');\n    }\n  };\n  useEffect(() => {\n    fetchRooms();\n  }, [fetchRooms]);\n  return {\n    roomID,\n    roomIDCreate,\n    suggestedRoomIDs,\n    addedRooms,\n    setRoomID,\n    setRoomIDCreate,\n    setSuggestedRoomIDs,\n    error,\n    setError,\n    isLoading,\n    userRooms,\n    handleJoinRoom,\n    handleCreateRoom,\n    handleDeleteRoom\n  };\n};\n_s(useIntroPage, \"9oj3LbWCu4Dfe1J8SlWDxZhrjeM=\", false, function () {\n  return [useNavigate];\n});\nexport default useIntroPage;","map":{"version":3,"names":["useCallback","useEffect","useState","useNavigate","toast","roomService","useIntroPage","_s","navigate","roomID","setRoomID","roomIDCreate","setRoomIDCreate","error","setError","userRooms","setUserRooms","addedRooms","setAddedRooms","isLoading","setIsLoading","suggestedRoomIDs","setSuggestedRoomIDs","userEmail","localStorage","getItem","createRoom","creatorID","result","success","err","console","suggestions","Array","from","length","_","i","suffix","Math","floor","random","message","getRoomsByEmail","email","data","rooms","getAddedRoomsByEmail","getAddedRooms","removeRoom","removeRoomData","fetchRooms","createdRooms","joinedRooms","Promise","all","handleJoinRoom","trimmedID","trim","handleCreateRoom","res","newRoomId","RoomID","handleDeleteRoom","window","confirm"],"sources":["/Users/akshayjadhav/Documents/GitHub/NSFResearchLocal/src/hooks/useIntroPage.js"],"sourcesContent":["// src/hooks/useIntroPage.js\nimport { useCallback, useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport roomService from '../services/roomService';\n\nconst useIntroPage = () => {\n  const navigate = useNavigate();\n  const [roomID, setRoomID] = useState('');\n  const [roomIDCreate, setRoomIDCreate] = useState('');\n  const [error, setError] = useState('');\n  const [userRooms, setUserRooms] = useState([]);\n  const [addedRooms, setAddedRooms] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [suggestedRoomIDs, setSuggestedRoomIDs] = useState([]);\n\n  const userEmail = localStorage.getItem('userEmail');\n\n  const createRoom = useCallback(async (creatorID, roomID = null) => {\n    try {\n      const result = await roomService.createRoom(creatorID, roomID);\n      toast.success('Room created successfully.');\n      setSuggestedRoomIDs([]);  // Clear suggestions if successful\n      return result;\n    } catch (err) {\n      console.error(err);\n  \n      if (roomID) {\n        const suggestions = Array.from({ length: 3 }, (_, i) => {\n          const suffix = Math.floor(Math.random() * 10000);\n          return `${roomID}-${suffix}`;\n        });\n        setSuggestedRoomIDs(suggestions);\n        toast.error(`${err.message}`);\n      } else {\n        toast.error(`${err.message}`);\n      }\n  \n      throw err;\n    }\n  }, []);\n\n  const getRoomsByEmail = useCallback(async (email) => {\n    try {\n      const data = await roomService.getRoomsByEmail(email);\n      return data.rooms || [];\n    } catch (err) {\n      console.error(err);\n      toast.error('Failed to fetch rooms by email.');\n      return [];\n    }\n  }, []);\n\n  const getAddedRoomsByEmail = useCallback(async (email) => {\n    try {\n      const data = await roomService.getAddedRooms(email);\n      return data.rooms || [];\n    } catch (err) {\n      console.error(err);\n      toast.error('Failed to fetch added rooms.');\n      return [];\n    }\n  }, []);\n\n  const removeRoom = useCallback(async ({roomID, email}) => {\n    try {\n      const result = await roomService.removeRoomData({ roomID, email});\n      toast.success('Room removed successfully.');\n      return result;\n    } catch (err) {\n      console.error(err);\n      toast.error('Failed to remove room.');\n      throw err;\n    }\n  }, [])\n\n  const fetchRooms = useCallback(async () => {\n    if (!userEmail) {\n      toast.error('Please log in to view your rooms');\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      const [createdRooms, joinedRooms] = await Promise.all([\n        getRoomsByEmail(userEmail),\n        getAddedRoomsByEmail(userEmail),\n      ]);\n      setUserRooms(createdRooms);\n      setAddedRooms(joinedRooms);\n    } catch {\n      toast.error('Could not fetch rooms');\n    } finally {\n      setIsLoading(false);\n    }\n  }, [userEmail, getRoomsByEmail, getAddedRoomsByEmail]);\n\n  const handleJoinRoom = () => {\n    const trimmedID = roomID.trim();\n    if (!trimmedID) {\n      setError('Please enter a Room ID');\n      return;\n    }\n    setError('');\n    navigate(`/room/${trimmedID}`);\n  };\n\n  const handleCreateRoom = async () => {\n    if (!userEmail) {\n      toast.error('Please log in to create a room');\n      return;\n    }\n  \n    setIsLoading(true);\n    try {\n      const trimmedID = roomIDCreate.trim();\n      let res = null; \n  \n      if (!trimmedID) {\n        res = await createRoom(userEmail);\n      } else {\n        res = await createRoom(userEmail, trimmedID);\n      }\n  \n      const newRoomId = res.RoomID;\n      navigate(`/room/${newRoomId}`);\n    } catch {\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleDeleteRoom = async (roomID) => {\n    if (!window.confirm('Are you sure you want to delete this room?')) return;\n    try {\n      await removeRoom({ roomID, email: userEmail });\n      fetchRooms();\n    } catch {\n      toast.error('Failed to delete room');\n    }\n  };\n\n  useEffect(() => {\n    fetchRooms();\n  }, [fetchRooms]);\n\n  return {\n    roomID,\n    roomIDCreate,\n    suggestedRoomIDs,\n    addedRooms,\n    setRoomID,\n    setRoomIDCreate,\n    setSuggestedRoomIDs,\n    error,\n    setError,\n    isLoading,\n    userRooms,\n    handleJoinRoom,\n    handleCreateRoom,\n    handleDeleteRoom,\n  };\n};\n\nexport default useIntroPage;\n"],"mappings":";AAAA;AACA,SAASA,WAAW,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AACxD,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,KAAK,QAAQ,gBAAgB;AACtC,OAAOC,WAAW,MAAM,yBAAyB;AAEjD,MAAMC,YAAY,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACzB,MAAMC,QAAQ,GAAGL,WAAW,CAAC,CAAC;EAC9B,MAAM,CAACM,MAAM,EAAEC,SAAS,CAAC,GAAGR,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACS,YAAY,EAAEC,eAAe,CAAC,GAAGV,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAACW,KAAK,EAAEC,QAAQ,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACa,SAAS,EAAEC,YAAY,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAACe,UAAU,EAAEC,aAAa,CAAC,GAAGhB,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAACiB,SAAS,EAAEC,YAAY,CAAC,GAAGlB,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACmB,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGpB,QAAQ,CAAC,EAAE,CAAC;EAE5D,MAAMqB,SAAS,GAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;EAEnD,MAAMC,UAAU,GAAG1B,WAAW,CAAC,OAAO2B,SAAS,EAAElB,MAAM,GAAG,IAAI,KAAK;IACjE,IAAI;MACF,MAAMmB,MAAM,GAAG,MAAMvB,WAAW,CAACqB,UAAU,CAACC,SAAS,EAAElB,MAAM,CAAC;MAC9DL,KAAK,CAACyB,OAAO,CAAC,4BAA4B,CAAC;MAC3CP,mBAAmB,CAAC,EAAE,CAAC,CAAC,CAAE;MAC1B,OAAOM,MAAM;IACf,CAAC,CAAC,OAAOE,GAAG,EAAE;MACZC,OAAO,CAAClB,KAAK,CAACiB,GAAG,CAAC;MAElB,IAAIrB,MAAM,EAAE;QACV,MAAMuB,WAAW,GAAGC,KAAK,CAACC,IAAI,CAAC;UAAEC,MAAM,EAAE;QAAE,CAAC,EAAE,CAACC,CAAC,EAAEC,CAAC,KAAK;UACtD,MAAMC,MAAM,GAAGC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG,KAAK,CAAC;UAChD,OAAO,GAAGhC,MAAM,IAAI6B,MAAM,EAAE;QAC9B,CAAC,CAAC;QACFhB,mBAAmB,CAACU,WAAW,CAAC;QAChC5B,KAAK,CAACS,KAAK,CAAC,GAAGiB,GAAG,CAACY,OAAO,EAAE,CAAC;MAC/B,CAAC,MAAM;QACLtC,KAAK,CAACS,KAAK,CAAC,GAAGiB,GAAG,CAACY,OAAO,EAAE,CAAC;MAC/B;MAEA,MAAMZ,GAAG;IACX;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMa,eAAe,GAAG3C,WAAW,CAAC,MAAO4C,KAAK,IAAK;IACnD,IAAI;MACF,MAAMC,IAAI,GAAG,MAAMxC,WAAW,CAACsC,eAAe,CAACC,KAAK,CAAC;MACrD,OAAOC,IAAI,CAACC,KAAK,IAAI,EAAE;IACzB,CAAC,CAAC,OAAOhB,GAAG,EAAE;MACZC,OAAO,CAAClB,KAAK,CAACiB,GAAG,CAAC;MAClB1B,KAAK,CAACS,KAAK,CAAC,iCAAiC,CAAC;MAC9C,OAAO,EAAE;IACX;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMkC,oBAAoB,GAAG/C,WAAW,CAAC,MAAO4C,KAAK,IAAK;IACxD,IAAI;MACF,MAAMC,IAAI,GAAG,MAAMxC,WAAW,CAAC2C,aAAa,CAACJ,KAAK,CAAC;MACnD,OAAOC,IAAI,CAACC,KAAK,IAAI,EAAE;IACzB,CAAC,CAAC,OAAOhB,GAAG,EAAE;MACZC,OAAO,CAAClB,KAAK,CAACiB,GAAG,CAAC;MAClB1B,KAAK,CAACS,KAAK,CAAC,8BAA8B,CAAC;MAC3C,OAAO,EAAE;IACX;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMoC,UAAU,GAAGjD,WAAW,CAAC,OAAO;IAACS,MAAM;IAAEmC;EAAK,CAAC,KAAK;IACxD,IAAI;MACF,MAAMhB,MAAM,GAAG,MAAMvB,WAAW,CAAC6C,cAAc,CAAC;QAAEzC,MAAM;QAAEmC;MAAK,CAAC,CAAC;MACjExC,KAAK,CAACyB,OAAO,CAAC,4BAA4B,CAAC;MAC3C,OAAOD,MAAM;IACf,CAAC,CAAC,OAAOE,GAAG,EAAE;MACZC,OAAO,CAAClB,KAAK,CAACiB,GAAG,CAAC;MAClB1B,KAAK,CAACS,KAAK,CAAC,wBAAwB,CAAC;MACrC,MAAMiB,GAAG;IACX;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMqB,UAAU,GAAGnD,WAAW,CAAC,YAAY;IACzC,IAAI,CAACuB,SAAS,EAAE;MACdnB,KAAK,CAACS,KAAK,CAAC,kCAAkC,CAAC;MAC/C;IACF;IAEAO,YAAY,CAAC,IAAI,CAAC;IAClB,IAAI;MACF,MAAM,CAACgC,YAAY,EAAEC,WAAW,CAAC,GAAG,MAAMC,OAAO,CAACC,GAAG,CAAC,CACpDZ,eAAe,CAACpB,SAAS,CAAC,EAC1BwB,oBAAoB,CAACxB,SAAS,CAAC,CAChC,CAAC;MACFP,YAAY,CAACoC,YAAY,CAAC;MAC1BlC,aAAa,CAACmC,WAAW,CAAC;IAC5B,CAAC,CAAC,MAAM;MACNjD,KAAK,CAACS,KAAK,CAAC,uBAAuB,CAAC;IACtC,CAAC,SAAS;MACRO,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC,EAAE,CAACG,SAAS,EAAEoB,eAAe,EAAEI,oBAAoB,CAAC,CAAC;EAEtD,MAAMS,cAAc,GAAGA,CAAA,KAAM;IAC3B,MAAMC,SAAS,GAAGhD,MAAM,CAACiD,IAAI,CAAC,CAAC;IAC/B,IAAI,CAACD,SAAS,EAAE;MACd3C,QAAQ,CAAC,wBAAwB,CAAC;MAClC;IACF;IACAA,QAAQ,CAAC,EAAE,CAAC;IACZN,QAAQ,CAAC,SAASiD,SAAS,EAAE,CAAC;EAChC,CAAC;EAED,MAAME,gBAAgB,GAAG,MAAAA,CAAA,KAAY;IACnC,IAAI,CAACpC,SAAS,EAAE;MACdnB,KAAK,CAACS,KAAK,CAAC,gCAAgC,CAAC;MAC7C;IACF;IAEAO,YAAY,CAAC,IAAI,CAAC;IAClB,IAAI;MACF,MAAMqC,SAAS,GAAG9C,YAAY,CAAC+C,IAAI,CAAC,CAAC;MACrC,IAAIE,GAAG,GAAG,IAAI;MAEd,IAAI,CAACH,SAAS,EAAE;QACdG,GAAG,GAAG,MAAMlC,UAAU,CAACH,SAAS,CAAC;MACnC,CAAC,MAAM;QACLqC,GAAG,GAAG,MAAMlC,UAAU,CAACH,SAAS,EAAEkC,SAAS,CAAC;MAC9C;MAEA,MAAMI,SAAS,GAAGD,GAAG,CAACE,MAAM;MAC5BtD,QAAQ,CAAC,SAASqD,SAAS,EAAE,CAAC;IAChC,CAAC,CAAC,MAAM,CACR,CAAC,SAAS;MACRzC,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC;EAED,MAAM2C,gBAAgB,GAAG,MAAOtD,MAAM,IAAK;IACzC,IAAI,CAACuD,MAAM,CAACC,OAAO,CAAC,4CAA4C,CAAC,EAAE;IACnE,IAAI;MACF,MAAMhB,UAAU,CAAC;QAAExC,MAAM;QAAEmC,KAAK,EAAErB;MAAU,CAAC,CAAC;MAC9C4B,UAAU,CAAC,CAAC;IACd,CAAC,CAAC,MAAM;MACN/C,KAAK,CAACS,KAAK,CAAC,uBAAuB,CAAC;IACtC;EACF,CAAC;EAEDZ,SAAS,CAAC,MAAM;IACdkD,UAAU,CAAC,CAAC;EACd,CAAC,EAAE,CAACA,UAAU,CAAC,CAAC;EAEhB,OAAO;IACL1C,MAAM;IACNE,YAAY;IACZU,gBAAgB;IAChBJ,UAAU;IACVP,SAAS;IACTE,eAAe;IACfU,mBAAmB;IACnBT,KAAK;IACLC,QAAQ;IACRK,SAAS;IACTJ,SAAS;IACTyC,cAAc;IACdG,gBAAgB;IAChBI;EACF,CAAC;AACH,CAAC;AAACxD,EAAA,CA5JID,YAAY;EAAA,QACCH,WAAW;AAAA;AA6J9B,eAAeG,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}